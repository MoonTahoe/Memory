function EventCaller(){this.subscribers={}}function MemoryGame(a,b){this.table=a,this.deck=new Deck,this.MemoryItems=["!","@","#","$","%","&","*","+","=","?"],this.FaceUpCards=[],this.debug=b||!1,this.showTime=b?0:1500;for(var c=0;c<this.MemoryItems.length;c++)this.deck.GameCards.push(new Card(this.MemoryItems[c],document.createElement("div"))),this.deck.GameCards.push(new Card(this.MemoryItems[c],document.createElement("div")));Object.defineProperty(this,"gameCards",{get:function(){return this.deck.GameCards}})}function checkCards(a,b){2===a.length&&(a[0].FaceValue===a[1].FaceValue?(b.emit("match",a[1].FaceValue),setTimeout(function(){a[0].discard(),a[1].discard(),a.pop(),a.pop(),b.table.children.length||b.emit("end")},b.showTime)):setTimeout(function(){a[0].flip(),a[1].flip(),a.pop(),a.pop()},b.showTime))}function checkRequired(a,b){if(!a)throw new Error("Messenger constructor requires a DOM element as an argument.");if(!(a instanceof HTMLElement))throw new Error("Messenger DOM element argument not a HTMLElement.");if(b&&"string"!=typeof b)throw new Error("Messenger Message not a string.")}function Messenger(a,b){this.el=a,this.message="",checkRequired(a,b),b&&(this.el.innerHTML=b,this.message=b)}function Timer(a){this.interval=null,this.intervalTime=a||100,this.time=this.intervalTime,this.ticks=0}var Card=function(a,b){this.faceUp=!1,this.FaceValue=a,this.cardElement=b};Card.prototype.flip=function(){this.faceUp?(this.cardElement.removeAttribute("class"),this.cardElement.innerHTML=""):(this.cardElement.setAttribute("class","selected"),this.cardElement.innerHTML="<span>"+this.FaceValue+"</span>"),this.faceUp=!this.faceUp},Card.prototype.discard=function(){this.cardElement.parentNode.removeChild(this.cardElement)};var Deck=function(){this.GameCards=[]};Deck.prototype.getCount=function(){return this.GameCards.length},Deck.prototype.shuffle=function(){for(var a=[],b=function(){var b=Math.floor(Math.random()*a.length),c=a[b];return a.splice(b,1),c},c=this.GameCards.length,d=0;c>d;d++)a.push(this.GameCards.pop());for(d=0;c>d;d++)this.GameCards.push(b())},Deck.prototype.deal=function(){return this.GameCards.splice(0,1)},EventCaller.prototype.on=function(a,b){this.subscribers[a]||(this.subscribers[a]=[]),this.subscribers[a].push(b)},EventCaller.prototype.emit=function(a){var b=arguments;this.subscribers[a]&&this.subscribers[a].forEach(function(a){b.length>1?a(b[1],b[2],b[3]):a()})},EventCaller.prototype.remove=function(a){this.subscribers[a]=void 0},MemoryGame.prototype=new EventCaller,MemoryGame.prototype.deal=function(a){var b=this;this.gameCards.forEach(function(a){a.faceUp&&a.flip()}),this.debug||this.deck.shuffle(),this.gameCards.forEach(function(a){a.cardElement.onclick=function(){b.FaceUpCards.length<2&&(a.flip(),b.FaceUpCards.push(a),checkCards(b.FaceUpCards,b))},b.table.appendChild(a.cardElement)}),this.emit("deal",this.table,this.debug),a&&a(this.table)},Messenger.prototype.update=function(a){this.message=a,this.el.innerHTML=a},Timer.prototype.start=function(){var a=this;this.interval=setInterval(function(){a.time+=a.intervalTime},this.intervalTime)},Timer.prototype.stop=function(){clearInterval(this.interval)},Timer.prototype.reset=function(){this.stop(),this.time=0};